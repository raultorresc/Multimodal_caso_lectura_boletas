{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://example.org/schemas/boleta_peru.schema.json",
  "title": "Boleta Peruana (CPE) v1.0",
  "type": "object",
  "additionalProperties": false,
  "required": [
    "document_type",
    "issuer",
    "issue_date",
    "series",
    "number",
    "currency",
    "items",
    "totals"
  ],
  "properties": {
    "document_type": {
      "type": "string",
      "enum": [
        "Boleta",
        "Boleta de Venta",
        "Boleta de Venta Electr√≥nica"
      ]
    },
    "issuer": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "ruc",
        "business_name"
      ],
      "properties": {
        "ruc": {
          "type": "string",
          "pattern": "^[0-9]{11}$"
        },
        "business_name": {
          "type": "string",
          "minLength": 2
        },
        "tradename": {
          "type": "string"
        },
        "address": {
          "type": "string"
        }
      }
    },
    "customer": {
      "type": "object",
      "additionalProperties": true,
      "properties": {
        "ruc_dni": {
          "type": "string",
          "pattern": "^[0-9A-Za-z\\-]{8,15}$"
        },
        "name": {
          "type": "string"
        },
        "address": {
          "type": "string"
        }
      }
    },
    "issue_date": {
      "type": "string",
      "format": "date-time"
    },
    "series": {
      "type": "string",
      "pattern": "^[A-Z]{1}[0-9]{3}$"
    },
    "number": {
      "type": "string",
      "pattern": "^[0-9]{1,8}$"
    },
    "currency": {
      "type": "string",
      "enum": [
        "PEN",
        "USD"
      ]
    },
    "payment_method": {
      "type": "string",
      "enum": [
        "contado",
        "credito",
        "tarjeta",
        "transferencia",
        "otros"
      ]
    },
    "items": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "additionalProperties": false,
        "required": [
          "description",
          "qty",
          "unit_price"
        ],
        "properties": {
          "qty": {
            "type": "number"
          },
          "unit": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "unit_price": {
            "type": "number"
          },
          "subtotal": {
            "type": "number"
          }
        }
      }
    },
    "totals": {
      "type": "object",
      "additionalProperties": false,
      "required": [
        "total"
      ],
      "properties": {
        "op_gravada": {
          "type": "number"
        },
        "op_inafecta": {
          "type": "number"
        },
        "op_exonerada": {
          "type": "number"
        },
        "discounts": {
          "type": "number"
        },
        "igv": {
          "type": "number"
        },
        "total": {
          "type": "number"
        }
      }
    },
    "observations": {
      "type": "string"
    },
    "raw_text": {
      "type": "string"
    }
  }
}